<div class="modal-overlay" (click)="closeModal()" *ngIf="pokemon">
  <div class="modal-content" (click)="$event.stopPropagation()" [style.background]="getTypeGradient()">

    <!-- Header con gradiente -->
    <div class="modal-header">
      <button class="close-btn" (click)="closeModal()" aria-label="Cerrar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"></path>
        </svg>
      </button>
      <div class="pokemon-id">#{{ pokemon.id.toString().padStart(3, '0') }}</div>
    </div>

    <div class="pokemon-detail">
      <!-- Imagen del Pok√©mon -->
      <div class="image-container">
        <img
          [src]="getImage()"
          [alt]="pokemon.name"
          class="detail-image"
          (error)="handleImageError($event)">
      </div>

      <!-- Nombre y tipos -->
      <div class="pokemon-header">
        <h1 class="pokemon-name">{{ pokemon.name | titlecase }}</h1>
        <div class="types">
          <span
            *ngFor="let type of pokemon.types"
            class="type-badge type-{{ type.type.name }}">
            {{ type.type.name | uppercase }}
          </span>
        </div>
      </div>

      <!-- Stats principales -->
      <div class="quick-stats">
        <div class="quick-stat">
          <div class="stat-icon">‚≠ê</div>
          <div class="stat-info">
            <span class="stat-value">{{ getBaseExperience() }}</span>
            <span class="stat-label">EXP Base</span>
          </div>
        </div>
        <div class="quick-stat">
          <div class="stat-icon">üìè</div>
          <div class="stat-info">
            <span class="stat-value">{{ getHeight() }} m</span>
            <span class="stat-label">Altura</span>
          </div>
        </div>
        <div class="quick-stat">
          <div class="stat-icon">‚öñÔ∏è</div>
          <div class="stat-info">
            <span class="stat-value">{{ getWeight() }} kg</span>
            <span class="stat-label">Peso</span>
          </div>
        </div>
      </div>

      <!-- Pesta√±as de contenido -->
      <div class="tabs">
        <div class="tab-content">

          <!-- Estad√≠sticas -->
          <div class="tab-section">
            <h3 class="section-title">Estad√≠sticas de Combate</h3>
            <div class="stats-grid">
              <div *ngFor="let stat of getStats()" class="stat-item">
                <div class="stat-header">
                  <span class="stat-name">{{ stat.stat.name | titlecase }}</span>
                  <span class="stat-value">{{ stat.base_stat }}</span>
                </div>
                <div class="stat-bar">
                  <div class="stat-bar-fill" [style.width.%]="(stat.base_stat / 255) * 100"></div>
                </div>
                <span class="stat-effort" *ngIf="stat.effort > 0">+{{ stat.effort }} EV</span>
              </div>
            </div>
          </div>

          <!-- Habilidades -->
          <div class="tab-section">
            <h3 class="section-title">Habilidades</h3>
            <div class="abilities-grid">
              <div *ngFor="let ability of getAbilities()" class="ability-item">
                <span class="ability-name">{{ ability.ability.name | titlecase }}</span>
                <span *ngIf="ability.is_hidden" class="ability-hidden">(Oculta)</span>
                <span class="ability-slot">Slot {{ ability.slot }}</span>
              </div>
            </div>
          </div>

          <!-- Informaci√≥n adicional -->
          <div class="tab-section">
            <h3 class="section-title">Informaci√≥n Adicional</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Especie</span>
                <span class="info-value">{{ pokemon.species?.name ? (pokemon.species.name | titlecase) : 'N/A' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Orden</span>
                <span class="info-value">{{ pokemon.order || 'N/A' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Experiencia base</span>
                <span class="info-value">{{ getBaseExperience() }}</span>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
